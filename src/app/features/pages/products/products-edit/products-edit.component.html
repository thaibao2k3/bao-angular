<div class="container" *ngIf="product">
  <div class="header">
    <h2>Thông tin sản phẩm</h2>
    <div class="header-buttons">
      <button class="btn btn-success" (click)="save()">Cấu hình in tem</button>
      <button class="btn">In tem sản phẩm</button>
      <button class="btn">In tem ID</button>
      <button class="btn btn-danger" (click)="delete()">Xóa</button>
    </div>
  </div>

  <div class="content">
    <!-- Hình ảnh -->
    <div class="image-upload-section">
      <div class="image-upload" (click)="uploadImage()">
        <img *ngIf="product.imageUrl" [src]="product.imageUrl"
             style="width:100%;height:100%;object-fit:cover;border-radius:4px;">
        <svg *ngIf="!product.imageUrl" viewBox="0 0 24 24">
          <path d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"/>
        </svg>
      </div>
      <div style="flex:1;">
        <div class="form-group">
          <label class="required">Tên sản phẩm</label>
          <input type="text" class="form-control" [(ngModel)]="product.name" name="name" required>
        </div>
      </div>
    </div>

    <div class="form-grid">
      <!-- Danh mục -->
      <div class="form-group">
        <label class="required">Danh mục</label>
        <select class="form-control" [(ngModel)]="product.categoryId" name="categoryId" required>
          <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
        </select>
      </div>

      <!-- Thương hiệu -->
      <div class="form-group">
        <label>Thương hiệu</label>
        <input type="text" class="form-control" [(ngModel)]="product.brand" name="brand">
      </div>

      <!-- Giá nhập -->
      <div class="form-group">
        <label class="required">Giá nhập</label>
        <input type="number" class="form-control" [(ngModel)]="product.price" name="price" required>
      </div>

      <!-- Vị trí -->
      <div class="form-group">
        <label>Vị trí để hàng</label>
        <input type="text" class="form-control" [(ngModel)]="product.location" name="location">
      </div>

      <!-- Giá bán buôn -->
      <div class="form-group">
        <label class="required">Giá bán buôn/bán sỉ</label>
        <input type="number" class="form-control" [(ngModel)]="product.wholesalePrice" name="wholesalePrice" required>
      </div>

      <!-- Đơn vị -->
      <div class="form-group">
        <label class="required">Đơn vị</label>
        <select class="form-control" [(ngModel)]="product.unitId" name="unitId" required>
          <option *ngFor="let u of units" [value]="u.id">{{ u.name }}</option>
        </select>
      </div>

      <!-- Giá bán lẻ -->
      <div class="form-group">
        <label class="required">Giá bán lẻ</label>
        <input type="number" class="form-control" [(ngModel)]="product.retailPrice" name="retailPrice" required>
      </div>

      <!-- Barcode -->
      <div class="form-group barcode-section">
        <label>Barcode</label>
        <input type="text" class="form-control" [(ngModel)]="product.barcode" name="barcode">
        <button type="button" class="refresh-btn" (click)="generateBarcode()">Tạo mới</button>
      </div>

      <!-- Số lượng cảnh báo -->
      <div class="form-group form-full-width">
        <label class="required">Số lượng cảnh báo hết hàng</label>
        <input type="number" class="form-control" [(ngModel)]="product.alertQuantity" name="alertQuantity" required>
      </div>
    </div>

    <!-- Cho phép bán / Bán nhanh -->
    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="allow-sale" [(ngModel)]="product.allowSell" name="allowSell">
        <label for="allow-sale">Cho phép bán</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="fast-sale" [(ngModel)]="product.fastSell" name="fastSell">
        <label for="fast-sale">Bán nhanh</label>
      </div>
    </div>
  </div>
</div>
