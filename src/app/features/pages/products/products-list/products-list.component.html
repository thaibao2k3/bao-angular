<div class="container">
  <!-- Header -->
  <div class="header">
    <h1 class="title">Danh sách sản phẩm</h1>

    <!-- Ô tìm kiếm -->
    <div class="search-box" nzSearch>
      <input
        type="text"
        nz-input
        placeholder="Tìm sản phẩm theo tên, barcode, danh mục hoặc đơn vị..."
        [(ngModel)]="searchKeyword"
        (ngModelChange)="onSearch()" />

      <button nz-button nzType="default" nzSearch (click)="onSearch()">
        <i nz-icon nzType="search"></i> Tìm
      </button>
    </div>

    <!-- Các nút hành động -->
    <div class="header-actions">
      <div class="filter-dropdown">
        <span>Tất cả</span>
        <i class="fas fa-chevron-down"></i>
      </div>
      <button class="btn btn-outline">
        <i class="fas fa-download"></i>
        Xuất dữ liệu
      </button>
      <button class="btn btn-outline">
        <i class="fas fa-plus"></i>
        Tạo dữ liệu
      </button>
      <button class="btn btn-primary" [routerLink]="'/products/add'">
        <i class="fas fa-plus"></i>
        Thêm
      </button>
    </div>
  </div>

  <div class="toolbar">
  <button class="btn btn-primary" (click)="toggleSource()">
    {{ useApi ? 'Dùng Firebase' : 'Dùng API NestJS' }}
  </button>
</div>
  <!-- Tabs -->
  <div class="tabs">
    <div class="tab active">Cho bán</div>
    <div class="tab">Không cho bán</div>
  </div>

  <!-- Product Count -->
  <div class="product-count">
    Tổng <strong>{{ products.length }}</strong> sản phẩm
  </div>

  <!-- Table -->
  <div class="table-container">
    <table class="table">
      <thead class="table-header">
        <tr>
          <th>Hình ảnh</th>
          <th class="sortable">Tên sản phẩm</th>
          <th>Đơn vị</th>
          <th>Barcode</th>
          <th>Danh mục</th>
          <th>Thương hiệu</th>
          <th>Giá</th>
        </tr>
      </thead>

      <tbody class="table-body">
        <tr *ngFor="let product of products" (click)="gotoEdit(product.id)" style="cursor: pointer;">
          <!-- Ảnh sản phẩm -->
          <td>
            <div class="product-image">
              <img *ngIf="product.imageUrl; else noImage"
                   [src]="product.imageUrl"
                   alt="Ảnh sản phẩm"
                   style="width:50px; height:50px; object-fit:cover;">
              <ng-template #noImage>
                <i class="fas fa-image"></i>
              </ng-template>
            </div>
          </td>

          <!-- Tên sản phẩm -->
          <td><span class="product-name">{{ product.name }}</span></td>

          <!-- Đơn vị -->
          <td>{{ product.unitName || '-' }}</td>

          <!-- Barcode -->
          <td>{{ product.barcode || '-' }}</td>

          <!-- Danh mục -->
          <td>{{ product.categoryName || '-' }}</td>

          <!-- Thương hiệu -->
          <td>{{ product.brand || '-' }}</td>

          <!-- Giá -->
          <td>{{ product.price | currency:'VND' }}</td>
          <td>{{ product.categoryId || '-' }}</td>

        </tr>
      </tbody>
    </table>
  </div>
</div>
